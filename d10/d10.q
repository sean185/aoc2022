fn:{x,:i:last x;$[y like "addx*";x,:i+last(" J";" ")0:y;x]}
output:(1#1)fn/read0`:d10.txt
/p1
sum c*output@-1+c:20+40*til 6
/p2
" #"40 cut 2>abs(240#output)-240#til 40